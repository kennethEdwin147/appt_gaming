# ğŸ® Instructions Dusk Browser Tests Auth - Gaming Platform

## ğŸ¯ Objectif
CrÃ©er des tests Browser complets pour l'authentification de la plateforme gaming avec Laravel Dusk, couvrant tous les flows d'inscription, login et setup crÃ©ateur.

## ğŸ“‹ TÃ¢ches Ã  rÃ©aliser

### 1. Installation & Configuration Dusk
- Installer Laravel Dusk via Composer
- Configurer l'environnement de test (.env.dusk.local)
- Setup base de donnÃ©es de test
- Configurer ChromeDriver

### 2. Structure des tests Browser Auth
CrÃ©er la structure complÃ¨te dans `tests/Browser/Auth/`:

```
tests/Browser/Auth/
â”œâ”€â”€ RegistrationFlowTest.php      # Flow inscription complÃ¨te (customer/creator)
â”œâ”€â”€ CreatorSetupWizardTest.php    # Wizard setup crÃ©ateur gaming (2 Ã©tapes)
â”œâ”€â”€ LoginFlowTest.php             # Login + redirections selon rÃ´les
â”œâ”€â”€ EmailVerificationFlowTest.php # Flow vÃ©rification email
â””â”€â”€ RoleBasedAccessTest.php       # ContrÃ´le d'accÃ¨s selon rÃ´les
```

### 3. Tests prioritaires Ã  crÃ©er

#### RegistrationFlowTest.php
- **Flow inscription customer** : choix rÃ´le â†’ form â†’ confirmation
- **Flow inscription creator** : choix rÃ´le â†’ form â†’ redirection wizard
- **Validation forms** : champs requis, email unique, format
- **Gaming branding** : vÃ©rifier textes/UI gaming
- **Gestion erreurs** : email dÃ©jÃ  utilisÃ©, validation client-side

#### CreatorSetupWizardTest.php  
- **Setup crÃ©ateur** : bio, platform_name, platform_url, type, timezone
- **Validation form** : champs requis, format URL, unicitÃ© platform_name
- **Completion** : redirection dashboard crÃ©ateur
- **Gestion erreurs** : validation temps rÃ©el, messages d'erreur

#### LoginFlowTest.php
- **Login basique** : email/password â†’ dashboard
- **Redirections rÃ´les** : customer â†’ booking, creator â†’ dashboard
- **Ã‰tats setup** : creator non-setup â†’ wizard
- **Remember me** : persistance session
- **Erreurs login** : mauvais credentials, compte suspendu

#### EmailVerificationFlowTest.php
- **Flow complet** : inscription â†’ email â†’ clic lien â†’ vÃ©rification
- **Resend email** : bouton renvoyer, limitation
- **Lien expirÃ©** : gestion expiration, nouveau lien
- **DÃ©jÃ  vÃ©rifiÃ©** : redirection appropriÃ©e

#### RoleBasedAccessTest.php
- **AccÃ¨s customer** : peut voir booking, pas dashboard crÃ©ateur
- **AccÃ¨s creator** : peut voir dashboard, pas admin
- **AccÃ¨s admin** : peut tout voir
- **Redirections** : accÃ¨s non autorisÃ© â†’ login ou erreur 403

### 4. SpÃ©cificitÃ©s CrÃ©ateur Ã  tester

#### Setup crÃ©ateur
- **Champs requis** : bio, platform_name, platform_url, type, timezone
- **Validation platform_name** : unicitÃ© par crÃ©ateur (selon contrainte DB)
- **Type libre** : string libre (coach, streamer, expert, etc.)
- **Platform_url** : format URL valide
- **Timezone** : sÃ©lection fuseau horaire

### 5. Bonnes pratiques Ã  respecter

#### SÃ©lecteurs robustes
- Utiliser `data-testid` pour les Ã©lÃ©ments critiques
- Ã‰viter les sÃ©lecteurs CSS fragiles
- PrÃ©fÃ©rer les textes visibles aux IDs

#### DonnÃ©es de test
- Factories pour crÃ©er des users/creators cohÃ©rents
- Emails de test valides
- Cleanup entre tests

#### Performance
- Grouper les tests par page
- RÃ©utiliser les sessions quand possible
- Optimiser les attentes (waitFor)

#### Debugging
- Screenshots automatiques sur Ã©chec
- Logs dÃ©taillÃ©s des erreurs
- Console browser pour debug JS

## ğŸ”§ Configuration requise

### Environnement test
```
APP_URL=http://localhost:8000
DB_DATABASE=gaming_platform_test
MAIL_MAILER=log
MAIL_LOG_CHANNEL=stack
```

### Factories nÃ©cessaires
- UserFactory (avec rÃ´les)
- CreatorFactory 
- CustomerFactory
- EmailVerificationFactory

### Routes Ã  tester
- `/register` (avec choix rÃ´les)
- `/login`
- `/email/verify`
- `/creator/setup` (form unique simplifiÃ©)
- `/dashboard` (selon rÃ´les)

## ğŸ® RÃ©sultat attendu
Tests Browser complets qui valident l'expÃ©rience utilisateur gaming de bout en bout, avec une couverture complÃ¨te des flows d'authentification et de setup crÃ©ateur.

## ğŸ“Š MÃ©triques de succÃ¨s
- âœ… Tous les flows d'inscription fonctionnent
- âœ… Wizard crÃ©ateur gaming opÃ©rationnel
- âœ… Redirections selon rÃ´les correctes
- âœ… Validation forms temps rÃ©el
- âœ… UX gaming cohÃ©rente
- âœ… Zero regression sur auth existante